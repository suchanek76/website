<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Suchánci na horách</title>
<style>
  /* reset */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: "Montserrat", Tahoma, sans-serif;
    background:#0f1620;
    color:#fff;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
  }

  /* HERO: použijeme <img> a zajistíme že nebude oříznutá nahoře a vyplní šířku */
  .hero {
    position: relative;
    width:100%;
    overflow:visible;
    background: #0f1620;
  }
  .hero .hero-bg {
    display:block;
    width:100vw;        /* vyplní šířku obrazovky přesně */
    height:auto;        /* zachová poměr stran -> top nebude oříznut */
    max-height:78vh;    /* zmenší příliš vysoké obrázky; upravitelné */
    object-fit:contain;
    margin:0 auto;
  }

  /* overlay se přizpůsobí skutečné výšce obrázku (nastavujeme v JS) */
  .hero-overlay {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    pointer-events:none; /* umožní klikání pouze přes vnořené elementy s pointer-events:auto */
    display:flex;
    justify-content:center;
  }
  .hero-inner{
    width:100%;
    max-width:1200px;
    padding:2.2rem 1rem;
    text-align:center;
    pointer-events:auto; /* tlačítka jsou interaktivní */
  }
  .hero h1{font-size:2.6rem;margin-bottom:.9rem;text-shadow:0 6px 20px rgba(0,0,0,0.6)}
  .hero-buttons{display:flex;gap:0.9rem;justify-content:center;flex-wrap:wrap}
  .hero-button{
    background:#fff;color:#112033;border:none;padding:.65rem 1rem;border-radius:8px;font-weight:700;cursor:pointer;
  }
  .hero-button:hover{transform:translateY(-2px)}

  /* SECTIONS - galerie blíž pod tlačítky, ale horní část obrázku zůstává vidět */
  .mountains-section{
    position:relative;
    z-index:3;
    padding:1.6rem 1rem 3rem 1rem;
    margin-top: calc(-1 * (var(--hero-overlap, 0px))); /* JS nastaví --hero-overlap tak, aby gallery hladce navazovala */
  }
  .section-title{text-align:center;font-size:1.5rem;margin:0.4rem 0 1rem}
  .section-description{
    max-width:1000px;margin:0 auto 1rem;padding:.8rem 1rem;border-radius:8px;background:rgba(255,255,255,0.02);color:#dbe9f2
  }

  /* gridy */
  .mountains-grid{max-width:1400px;margin:0 auto;display:grid;gap:1rem}
  .grid-3{grid-template-columns:repeat(3,1fr)}
  .grid-4{grid-template-columns:repeat(4,1fr)}
  @media (max-width:1100px){ .grid-4{grid-template-columns:repeat(3,1fr)} }
  @media (max-width:760px){ .grid-3,.grid-4{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:420px){ .grid-3,.grid-4{grid-template-columns:1fr} }

  .mountain-card{aspect-ratio:3/2;border-radius:10px;overflow:hidden;background:#344354 center/cover no-repeat;cursor:pointer;transition:transform .18s}
  .mountain-card:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(0,0,0,0.5)}

  .mountain-overlay{position:absolute;left:0;right:0;bottom:0;padding:.8rem;background:linear-gradient(to top, rgba(0,0,0,.85), rgba(0,0,0,0))}
  .mountain-name{font-weight:700}
  .mountain-details{font-size:.9rem;color:#cdd9e0;margin-top:.25rem}

  /* GALLERY MODAL */
  .gallery-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.95);z-index:5000;align-items:center;justify-content:center;touch-action:none}
  .gallery-modal.active{display:flex}
  .gallery-inner{position:relative;width:100%;max-width:1200px;display:flex;align-items:center;justify-content:center}
  .gallery-img{max-width:94%;max-height:86vh;border-radius:8px;object-fit:contain;transition:opacity .18s}
  .gallery-close{position:absolute;top:12px;right:12px;background:rgba(255,255,255,0.06);border:none;color:#fff;padding:6px 10px;border-radius:8px;cursor:pointer}
  .gallery-arrow{position:absolute;top:50%;transform:translateY(-50%);font-size:34px;color:#fff;background:rgba(0,0,0,0.25);padding:8px 12px;border-radius:8px;cursor:pointer;user-select:none}
  .gallery-arrow.left{left:12px}.gallery-arrow.right{right:12px}
  .gallery-caption{position:absolute;bottom:12px;left:0;right:0;text-align:center;color:#d7e0e8;font-size:14px}

  /* drobné */
  .visually-hidden{position:absolute;left:-9999px}
</style>
</head>
<body>

  <!-- HERO: skutečný <img> aby top nebyl oříznut -->
  <header class="hero" id="hero">
    <img id="heroBg" class="hero-bg" src="https://raw.githubusercontent.com/suchanek76/website/main/images/background.jpg" alt="Suchánci na horách">
    <div id="heroOverlay" class="hero-overlay" aria-hidden="false">
      <div class="hero-inner">
        <h1>Vzít batoh na záda a jít...</h1>
        <div class="hero-buttons" role="navigation" aria-label="Sekce">
          <button class="hero-button" onclick="gotoSection('koruna-evropy')">Koruna Evropy 14/42</button>
          <button class="hero-button" onclick="gotoSection('alpske-ctyrtisicovky')">Alpské čtyřtisícovky 5/82</button>
          <button class="hero-button" onclick="gotoSection('Nepal')">Nepál</button>
        </div>
      </div>
    </div>
  </header>

  <!-- KORUNA -->
  <section id="koruna-evropy" class="mountains-section">
    <h2 class="section-title">Koruna Evropy</h2>
    <div id="korunaGrid" class="mountains-grid grid-3" aria-live="polite"></div>
  </section>

  <!-- ALPS -->
  <section id="alpske-ctyrtisicovky" class="mountains-section">
    <h2 class="section-title">Alpské čtyřtisícovky</h2>
    <div id="alpsGrid" class="mountains-grid grid-3" aria-live="polite"></div>
  </section>

  <!-- NEPAL -->
  <section id="Nepal" class="mountains-section">
    <h2 class="section-title">Nepál</h2>
    <div id="nepalText" class="section-description">Zde napiš krátký popis výletu do Nepálu — trasa, datum, dojmy.</div>
    <div id="nepalGrid" class="mountains-grid grid-4" aria-live="polite"></div>
  </section>

  <!-- GALLERY MODAL -->
  <div id="galleryModal" class="gallery-modal" role="dialog" aria-hidden="true">
    <div class="gallery-inner">
      <img id="galleryImage" class="gallery-img" src="" alt="Fotografie">
      <button class="gallery-close" onclick="closeGallery()" aria-label="Zavřít">✕</button>
      <div class="gallery-arrow left" onclick="prevImage()" aria-label="Předchozí">❮</div>
      <div class="gallery-arrow right" onclick="nextImage()" aria-label="Další">❯</div>
      <div id="galleryCaption" class="gallery-caption"></div>
    </div>
  </div>

<script>
/* -------- DATA -------- */
const koruna = [
  { id:'mont-blanc', name:'Mont Blanc 4 810 m', image:'https://raw.githubusercontent.com/suchanek76/website/main/images/Koruna/MontBlanc2x3.jpg' },
  { id:'grossglockner', name:'Grossglockner 3 798 m', image:'https://raw.githubusercontent.com/suchanek76/website/main/images/Koruna/Grossglockner2x3.jpg' }
];
const alps = [
  { id:'alps-1', name:'Mont Blanc / Monte Bianco', image:'https://raw.githubusercontent.com/suchanek76/website/main/images/4000/MontBlanc2x3.jpg' },
  { id:'alps-2', name:'Dufourspitze', image:'' }
];
const nepalPhotos = Array.from({length:40}, (_,i)=>`https://raw.githubusercontent.com/suchanek76/website/main/images/Nepal/Nepal${String(i+1).padStart(2,'0')}.jpg`);

/* -------- STATE -------- */
let currentIndex = 0;
let galleryArray = nepalPhotos; // default when opening nepál gallery

/* -------- RENDERERS -------- */
function makeCard(src, title){
  const d = document.createElement('div');
  d.className = 'mountain-card';
  if(src) d.style.backgroundImage = `url(${src})`;
  if(title) d.setAttribute('title', title);
  return d;
}
function renderKoruna(){
  const g = document.getElementById('korunaGrid'); g.innerHTML='';
  koruna.forEach(item=>{
    const c = makeCard(item.image, item.name);
    c.onclick = ()=> openSmallMountainGallery(item); // small 4-photo modal
    g.appendChild(c);
  });
}
function renderAlps(){
  const g = document.getElementById('alpsGrid'); g.innerHTML='';
  alps.forEach(item=>{
    const c = makeCard(item.image, item.name);
    c.onclick = ()=> openSmallMountainGallery(item);
    g.appendChild(c);
  });
}
function renderNepal(){
  const g = document.getElementById('nepalGrid'); g.innerHTML='';
  nepalPhotos.forEach((url,idx)=>{
    const c = makeCard(url, `Nepál ${idx+1}`);
    c.onclick = ()=> openNepalGallery(idx);
    g.appendChild(c);
  });
}

/* -------- GALLERY FUNCTIONS -------- */
function openNepalGallery(index){
  galleryArray = nepalPhotos;
  currentIndex = index;
  showGallery();
}
function openSmallMountainGallery(mountain){
  // try to construct 4-photo array; fallback to main image if missing
  const arr = [];
  for(let i=1;i<=4;i++){
    const num = String(i).padStart(2,'0');
    arr.push(`https://raw.githubusercontent.com/suchanek76/website/main/images/${mountain.id}/${mountain.id}${num}.jpg`);
  }
  // fallback: if arr elements broken, browser will show broken thumbnails — acceptable or we could check via fetch
  galleryArray = arr;
  currentIndex = 0;
  showGallery();
}

function showGallery(){
  const modal = document.getElementById('galleryModal');
  const img = document.getElementById('galleryImage');
  const caption = document.getElementById('galleryCaption');
  img.style.opacity = 0;
  // small fade when swapping
  setTimeout(()=>{ img.src = galleryArray[currentIndex]; img.style.opacity = 1 }, 80);
  caption.textContent = `${currentIndex+1} / ${galleryArray.length}`;
  modal.classList.add('active');
  modal.setAttribute('aria-hidden','false');
  document.body.style.overflow='hidden';
}
function closeGallery(){
  const modal = document.getElementById('galleryModal');
  modal.classList.remove('active');
  modal.setAttribute('aria-hidden','true');
  document.body.style.overflow='';
}

function nextImage(){
  currentIndex = (currentIndex+1) % galleryArray.length;
  showGallery();
}
function prevImage(){
  currentIndex = (currentIndex-1 + galleryArray.length) % galleryArray.length;
  showGallery();
}

/* click outside image closes */
document.getElementById('galleryModal').addEventListener('click',(e)=>{
  if(e.target.id === 'galleryModal') closeGallery();
});

/* keyboard nav */
document.addEventListener('keydown',(e)=>{
  const modal = document.getElementById('galleryModal');
  if(!modal.classList.contains('active')) return;
  if(e.key === 'Escape') closeGallery();
  if(e.key === 'ArrowRight') nextImage();
  if(e.key === 'ArrowLeft') prevImage();
});

/* swipe support */
(function(){
  const modal = document.getElementById('galleryModal');
  let startX = 0;
  modal.addEventListener('touchstart', (e)=> startX = e.changedTouches[0].clientX);
  modal.addEventListener('touchend', (e)=>{
    const endX = e.changedTouches[0].clientX;
    if(endX < startX - 40) nextImage();
    if(endX > startX + 40) prevImage();
  });
})();

/* -------- overlay sizing & smooth section start -------- */
function syncHeroOverlayAndOverlap(){
  const heroBg = document.getElementById('heroBg');
  const heroOverlay = document.getElementById('heroOverlay');
  if(!heroBg || !heroOverlay) return;
  // set overlay height to image height so buttons are inside hero area
  heroOverlay.style.height = heroBg.clientHeight + 'px';
  // compute desired overlap (how much of gallery should visually enter image area)
  // keep it modest: 6% of viewport height or 40px min
  const overlap = Math.max(40, Math.round(window.innerHeight * 0.06));
  // set CSS var used in margins
  document.documentElement.style.setProperty('--hero-overlap', overlap + 'px');
}
window.addEventListener('resize', syncHeroOverlayAndOverlap);
window.addEventListener('load', syncHeroOverlayAndOverlap);

/* -------- smooth scroll to put gallery nicely under buttons -------- */
function gotoSection(id){
  // render grids to ensure correct layout (safe)
  renderKoruna(); renderAlps(); renderNepal();

  const target = document.getElementById(id);
  // scroll to top of the section
  target.scrollIntoView({behavior:'smooth', block:'start'});
  // adjust slightly so gallery begins a little higher (so it sits in hero area)
  setTimeout(()=> {
    // read computed overlap
    const overlap = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--hero-overlap')) || 0;
    window.scrollBy({ top: -Math.round(overlap * 0.6), left:0, behavior:'smooth' });
  }, 450);
}

/* -------- init -------- */
window.addEventListener('DOMContentLoaded', ()=>{
  renderKoruna(); renderAlps(); renderNepal();
  // ensure overlay synced after image loaded
  const heroBg = document.getElementById('heroBg');
  if(heroBg.complete) syncHeroOverlayAndOverlap(); else heroBg.onload = syncHeroOverlayAndOverlap;
});
</script>
</body>
</html>
