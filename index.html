<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vzít batoh a jít</title>
  <style>
    :root{
      --deep-navy:#04112b;
      --accent:#fff;
      --card-radius:12px;
      --max-width:1200px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#fff;background:var(--deep-navy)}

    /* HERO */
    .hero{
      position:relative;
      min-height:48vh;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:48px 24px 80px;
      background-image:linear-gradient(to bottom, rgba(4,17,43,0.25) 0%, rgba(4,17,43,0.7) 70%), url('https://raw.githubusercontent.com/suchanek76/website/main/images/background.jpg');
      background-size:cover;background-position:center top;
    }
    .container{width:100%;max-width:var(--max-width);margin:0 auto}
    .title{font-size:clamp(28px,6vw,52px);font-weight:700;text-align:center;color:#fff;margin:4px 0}
    .subtitle{opacity:0.9;text-align:center;margin-bottom:18px}

    .tabs{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
    .tab{background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.06);padding:10px 18px;border-radius:999px;color:#fff;cursor:pointer;font-weight:600}
    .tab.active{background:#fff;color:var(--deep-navy);box-shadow:0 6px 18px rgba(2,6,23,0.6)}

    /* Gallery wrapper overlaps hero bottom */
    .gallery-wrap{position:relative;top:-80px;padding:32px 24px 80px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:20px;border-radius:16px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}

    .grid{display:grid;gap:14px}
    /* Koruna & 4000: 3 per row on desktop */
    .grid.three{grid-template-columns:repeat(3,1fr)}
    /* Nepal: 4 per row on desktop */
    .grid.four{grid-template-columns:repeat(4,1fr)}

    .photo{
      position:relative;overflow:hidden;border-radius:10px;aspect-ratio:3/2;background:#000;display:block;cursor:pointer
    }
    .photo img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .6s cubic-bezier(.2,.9,.2,1)}
    .photo:focus img, .photo:hover img{transform:scale(1.03)}

    .photo .meta{
      position:absolute;left:12px;bottom:12px;right:12px;padding:10px;border-radius:6px;background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.55) 60%);backdrop-filter: blur(2px);
    }
    .meta h4{margin:0;font-size:15px;font-weight:700}
    .meta p{margin:3px 0 0;font-size:13px;opacity:0.9}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:24px;z-index:1200}
    .modal.open{display:flex}
    .modal-backdrop{position:absolute;inset:0;background:rgba(2,6,23,0.6);backdrop-filter:blur(4px)}
    .modal-card{position:relative;z-index:2;background:linear-gradient(180deg,#04112b,#06213a);max-width:920px;width:100%;border-radius:12px;padding:18px;box-shadow:0 20px 50px rgba(2,6,23,0.7);color:#fff}
    .modal-header{display:flex;justify-content:space-between;align-items:flex-start;gap:12px}
    .modal-title{font-size:20px;margin:0}
    .modal-meta{font-size:14px;opacity:0.95}
    .modal-body{margin-top:12px;display:grid;grid-template-columns:1fr 320px;gap:16px}
    .modal-left img{width:100%;height:420px;object-fit:cover;border-radius:8px}
    .modal-right{display:flex;flex-direction:column;gap:10px}
    .thumbs{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}

    .close-btn{background:transparent;border:0;color:#fff;font-size:20px;cursor:pointer}

    /* Nepal lightbox style */
    .lightbox-image{max-width:100%;height:auto;display:block;margin:0 auto}
    .lightbox-controls{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .arrow-btn{background:rgba(255,255,255,0.06);border:0;padding:10px 14px;border-radius:8px;color:#fff;cursor:pointer}

    /* Responsive */
    @media (max-width:1000px){.grid.three{grid-template-columns:repeat(2,1fr)}.modal-body{grid-template-columns:1fr 300px}.modal-left img{height:320px}}
    @media (max-width:640px){.hero{padding:28px 20px 60px}.grid.three{grid-template-columns:1fr}.grid.four{grid-template-columns:repeat(2,1fr)}.modal-body{grid-template-columns:1fr}.modal-left img{height:220px}}

    /* small helper */
    .sr-only{position:absolute;left:-10000px;width:1px;height:1px;top:auto;overflow:hidden}
  </style>
</head>
<body>
  <header class="hero">
    <div class="container">
      <h1 class="title">Vzít batoh a jít</h1>
      <p class="subtitle">Foto-alba z výšlapů — vyber sekci</p>
      <div class="tabs" role="tablist" aria-label="Galerie">
        <button class="tab active" data-target="koruna" role="tab" aria-selected="true">Koruna Evropy</button>
        <button class="tab" data-target="alpy" role="tab">Alpské čtyřtisícovky</button>
        <button class="tab" data-target="nepal" role="tab">Nepál</button>
      </div>
    </div>
  </header>

  <main class="gallery-wrap container">
    <!-- Koruna -->
    <section id="koruna" class="card gallery" aria-label="Koruna Evropy galerie">
      <h2 class="sr-only">Koruna Evropy</h2>
      <div class="grid three" id="koruna-grid"></div>
    </section>

    <!-- Alps -->
    <section id="alpy" class="card gallery" style="display:none" aria-label="Alpské čtyřtisícovky galerie">
      <h2 class="sr-only">Alpské čtyřtisícovky</h2>
      <div class="grid three" id="alpy-grid"></div>
    </section>

    <!-- Nepal -->
    <section id="nepal" class="card gallery" style="display:none" aria-label="Nepál galerie">
      <h2 class="sr-only">Nepál</h2>
      <div class="grid four" id="nepal-grid"></div>
    </section>
  </main>

  <!-- Modal (shared for Koruna + Alps) -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="Detaily fotografie">
      <div class="modal-header">
        <div>
          <h3 class="modal-title" id="modal-title">Název hory — výška</h3>
          <div class="modal-meta" id="modal-sub">Stát • Datum zdolání</div>
        </div>
        <button class="close-btn" aria-label="Zavřít" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-left">
          <img id="modal-main-img" src="" alt="Hlavní fotografie" />
        </div>
        <aside class="modal-right">
          <div><strong>Výstupový tým:</strong><div id="modal-team">—</div></div>
          <div><strong>Krátký popis:</strong><div id="modal-desc">—</div></div>
          <div><strong>Další fotky:</strong></div>
          <div class="thumbs" id="modal-thumbs"></div>
        </aside>
      </div>
    </div>
  </div>

  <!-- Nepal Lightbox modal -->
  <div id="nb-lightbox" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-card" role="dialog" aria-modal="true" style="max-width:1100px;">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <button class="arrow-btn" id="nb-prev" aria-label="Předchozí">◀</button>
        <button class="close-btn" aria-label="Zavřít" data-close>&times;</button>
        <button class="arrow-btn" id="nb-next" aria-label="Další">▶</button>
      </div>
      <div style="padding-top:12px;text-align:center">
        <img id="nb-img" class="lightbox-image" src="" alt="Nepál fotografie" />
        <div class="lightbox-controls">
          <div id="nb-caption">&nbsp;</div>
          <div id="nb-index">0 / 0</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- configuration: available image ranges and base URLs ---
    const cfg = {
      koruna: {count: 40, base: 'https://raw.githubusercontent.com/suchanek76/website/main/images/Koruna/Koruna', pad: 2},
      alpy:   {count: 40, base: 'https://raw.githubusercontent.com/suchanek76/website/main/images/4000/ctyrtisicovka', pad: 2},
      nepal:  {count: 40, base: 'https://raw.githubusercontent.com/suchanek76/website/main/images/Nepal/Nepal', pad: 2}
    };

    // Utility to build filename with leading zeros
    function pad(n, width){return String(n).padStart(width,'0')}

    // Mock meta generator (user can replace with real data later)
    function metaFor(section, idx){
      // creates placeholder names, heights and dates
      const num = idx;
      const name = (section==='koruna'? 'Hora Koruna ':'Hora Alpy ')+(num);
      const height = (2500 + (num*10)) + ' m';
      const country = (section==='nepal'? 'Nepál' : (section==='koruna' ? 'Slovensko' : 'Švýcarsko'));
      const date = new Date(2018 + (num % 6), (num % 12), ((num*3)%27)+1).toLocaleDateString('cs-CZ');
      const team = `Team A, Team B`;
      const desc = `Krátký popis výstupu číslo ${num}. Náročnost, počasí a zážitky.`;
      return {name, height, country, date, team, desc};
    }

    // Build gallery grids
    function buildGallery(sectionId, gridEl, layout){
      const conf = cfg[sectionId];
      for(let i=1;i<=conf.count;i++){
        const el = document.createElement('a');
        el.href='#'; el.className='photo'; el.setAttribute('data-section',sectionId); el.setAttribute('data-index',i);
        el.setAttribute('role','button');
        const img = document.createElement('img');
        img.loading='lazy';
        img.alt = `${sectionId} ${i}`;
        const filename = `${conf.base}${pad(i,conf.pad)}.jpg`;
        img.src = filename;
        el.appendChild(img);

        const m = metaFor(sectionId,i);
        const meta = document.createElement('div'); meta.className='meta';
        const h4 = document.createElement('h4'); h4.textContent = `${m.name} — ${m.height}`;
        const p = document.createElement('p'); p.textContent = `${m.country} • ${m.date}`;
        meta.appendChild(h4); meta.appendChild(p);
        el.appendChild(meta);

        gridEl.appendChild(el);
      }
    }

    // Initialize galleries
    document.addEventListener('DOMContentLoaded',()=>{
      buildGallery('koruna',document.getElementById('koruna-grid'));
      buildGallery('alpy',document.getElementById('alpy-grid'));
      buildGallery('nepal',document.getElementById('nepal-grid'));

      // tabs behavior
      document.querySelectorAll('.tab').forEach(btn=>{
        btn.addEventListener('click',()=>{
          document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
          btn.classList.add('active');
          const target = btn.dataset.target;
          document.querySelectorAll('.gallery').forEach(g=>g.style.display='none');
          document.getElementById(target).style.display='block';
        });
      });

      // photo click handlers (delegation)
      document.body.addEventListener('click', (ev)=>{
        const a = ev.target.closest('.photo');
        if(!a) return;
        ev.preventDefault();
        const section = a.dataset.section;
        const index = parseInt(a.dataset.index,10);
        if(section==='nepal') { openNepalLightbox(index); }
        else { openModal(section,index); }
      });

      // modal close
      document.querySelectorAll('[data-close]').forEach(el=>el.addEventListener('click',closeModals));
      document.addEventListener('keydown', (e)=>{
        if(e.key==='Escape') closeModals();
        if(document.getElementById('nb-lightbox').classList.contains('open')){
          if(e.key==='ArrowLeft') nbPrev();
          if(e.key==='ArrowRight') nbNext();
        }
      });

      // Nepal lightbox arrows
      document.getElementById('nb-prev').addEventListener('click',nbPrev);
      document.getElementById('nb-next').addEventListener('click',nbNext);

      // touch swipe for Nepal
      addNepalSwipe();
    });

    // --- Shared modal for Koruna & Alps ---
    function openModal(section, index){
      const m = metaFor(section,index);
      document.getElementById('modal-title').textContent = `${m.name} — ${m.height}`;
      document.getElementById('modal-sub').textContent = `${m.country} • ${m.date}`;
      document.getElementById('modal-team').textContent = m.team;
      document.getElementById('modal-desc').textContent = m.desc;
      const conf = cfg[section];
      const main = document.getElementById('modal-main-img');
      main.src = `${conf.base}${pad(index,conf.pad)}.jpg`;
      main.alt = `${m.name}`;
      // additional thumbs (up to 4 nearby images)
      const thumbs = document.getElementById('modal-thumbs'); thumbs.innerHTML='';
      for(let j=Math.max(1,index-2); j<=Math.min(conf.count,index+2); j++){
        if(j===index) continue;
        const t = document.createElement('img'); t.src = `${conf.base}${pad(j,conf.pad)}.jpg`; t.loading='lazy'; t.style.width='100%'; t.style.height='120px'; t.style.objectFit='cover'; t.style.borderRadius='6px'; t.style.cursor='pointer';
        t.addEventListener('click',()=>{ main.src = t.src; });
        thumbs.appendChild(t);
      }
      // open
      const modal = document.getElementById('modal'); modal.classList.add('open'); modal.setAttribute('aria-hidden','false');
    }
    function closeModals(){
      document.querySelectorAll('.modal').forEach(m=>{m.classList.remove('open');m.setAttribute('aria-hidden','true')});
    }

    // --- Nepal lightbox ---
    let nbIndex = 1;
    function openNepalLightbox(index){ nbIndex = index; renderNepal(); document.getElementById('nb-lightbox').classList.add('open'); document.getElementById('nb-lightbox').setAttribute('aria-hidden','false'); }
    function renderNepal(){ const conf = cfg.nepal; const img = document.getElementById('nb-img'); img.src = `${conf.base}${pad(nbIndex,conf.pad)}.jpg`; document.getElementById('nb-caption').textContent = `Nepál — foto ${nbIndex}`; document.getElementById('nb-index').textContent = `${nbIndex} / ${conf.count}`; }
    function nbPrev(){ const conf=cfg.nepal; nbIndex = nbIndex<=1?conf.count:nbIndex-1; renderNepal(); }
    function nbNext(){ const conf=cfg.nepal; nbIndex = nbIndex>=conf.count?1:nbIndex+1; renderNepal(); }

    function addNepalSwipe(){
      const box = document.getElementById('nb-lightbox'); let startX=0, endX=0;
      box.addEventListener('touchstart', e=>{ startX = e.changedTouches[0].screenX; });
      box.addEventListener('touchend', e=>{ endX = e.changedTouches[0].screenX; const diff = endX - startX; if(Math.abs(diff)>50){ if(diff>0) nbPrev(); else nbNext(); } });
    }

    // Accessibility: focus trap basic (keep simple)
    document.addEventListener('focusin', (e)=>{
      const modalOpen = document.querySelector('.modal.open');
      if(modalOpen){ if(!modalOpen.contains(e.target)) { e.stopPropagation(); modalOpen.focus(); } }
    });

  </script>
</body>
</html>
