<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Suchánci na horách</title>
  <style>
    /* ===== Základ ===== */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Montserrat, Arial, sans-serif;background:#1a2332;color:#fff;line-height:1.4}
    a{color:inherit}

    /* ===== Hero ===== */
    .hero{
      height:85vh;
      background:
        linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(26,35,50,1)),
        url('https://raw.githubusercontent.com/suchanek76/website/main/images/background.jpg') center/cover no-repeat;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start; /* posunout nahoru */
      padding-top:12rem; /* přizpůsobit podle potřeby */
      text-align:center;
    }
    .hero h1{font-size:3.2rem;margin-bottom:1.5rem;text-shadow:2px 2px 8px rgba(0,0,0,0.6)}
    .hero-buttons{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center}
    .hero-button{
      background:#fff;color:#1a2332;border:none;padding:0.9rem 1.8rem;border-radius:8px;
      font-weight:700;cursor:pointer;transition:all .18s;
    }
    .hero-button:hover{transform:scale(1.03);background:#3498db;color:#fff}

    /* ===== Sekce ===== */
    .mountains-section{padding:2rem 1.25rem 4rem 1.25rem;margin-top:-2.5rem}
    .section-title{text-align:center;font-size:1.7rem;margin-bottom:1rem}

    /* ===== Nepál text ===== */
    #nepalText{
      max-width:1100px;margin:0 auto 1.5rem auto;padding:1rem 1rem;color:#dfe6e9;
      font-size:1rem;background:rgba(255,255,255,0.03);border-radius:8px;
    }

    /* ===== Grid obecně ===== */
    .mountains-grid{max-width:1400px;margin:0 auto;display:grid;gap:1rem}
    /* default grid: 3 columns for normal sections */
    .grid-3{grid-template-columns:repeat(3,1fr)}
    /* Nepal: 4 columns on large screens */
    .grid-nepal{grid-template-columns:repeat(4,1fr)}

    .mountain-card{
      position:relative;aspect-ratio:3/2;border-radius:10px;overflow:hidden;background:#394d61 center/cover no-repeat;
      cursor:pointer;transition:transform .18s;
    }
    .mountain-card:hover{transform:scale(1.02)}

    /* overlay text for non-Nepal cards */
    .mountain-overlay{
      position:absolute;left:0;right:0;bottom:0;padding:0.9rem;background:linear-gradient(to top, rgba(0,0,0,0.85), rgba(0,0,0,0.1));
    }
    .mountain-name{font-weight:700;font-size:1.05rem}
    .mountain-details{font-size:0.9rem;color:#cfd8dc;margin-top:0.25rem}

    /* ===== Modal (Nepal gallery + can be reused) ===== */
    .modal {
      display:none;position:fixed;inset:0;background:rgba(0,0,0,0.92);z-index:2200;
      align-items:center;justify-content:center;padding:2rem;
    }
    .modal.active{display:flex}
    .modal-inner{position:relative;max-width:1100px;width:96%;display:flex;align-items:center;justify-content:center}
    .modal-img{max-width:100%;max-height:80vh;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
    .modal-close{position:absolute;top:-10px;right:-10px;background:#fff;color:#1a2332;border-radius:50%;width:44px;height:44px;border:none;font-size:1.4rem;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.4)}
    .modal-arrow{position:fixed;top:50%;transform:translateY(-50%);font-size:2.8rem;color:#fff;cursor:pointer;user-select:none;padding:0.2rem 0.6rem;border-radius:6px;background:rgba(0,0,0,0.25)}
    .modal-arrow:hover{background:rgba(255,255,255,0.06)}
    .modal-arrow.left{left:18px}
    .modal-arrow.right{right:18px}

    /* small caption if needed */
    .modal-caption{position:absolute;bottom:-50px;left:0;right:0;text-align:center;color:#cfd8dc;font-size:0.95rem}

    /* responsive */
    @media(max-width:1100px){ .grid-nepal{grid-template-columns:repeat(3,1fr)} .grid-3{grid-template-columns:repeat(2,1fr)} }
    @media(max-width:720px){ .grid-nepal{grid-template-columns:repeat(2,1fr)} .hero{padding-top:8rem} .hero h1{font-size:2rem} .mountains-section{padding-top:1rem} .modal-arrow{font-size:2rem} }
    @media(max-width:420px){ .grid-nepal{grid-template-columns:1fr} .grid-3{grid-template-columns:1fr} .modal-inner{width:100%} .modal-img{max-height:70vh} }
  </style>
</head>
<body>

  <!-- HERO -->
  <section class="hero" aria-label="Hero">
    <h1>Vzít batoh na záda a jít...</h1>
    <div class="hero-buttons" role="navigation" aria-label="Hlavní odkazy">
      <button class="hero-button" onclick="goTo('koruna-evropy')">Koruna Evropy 14/42</button>
      <button class="hero-button" onclick="goTo('alpske-ctyrtisicovky')">Alpské čtyřtisícovky 5/82</button>
      <button class="hero-button" onclick="goTo('Nepal')">Nepál</button>
    </div>
  </section>

  <!-- KORUNA EVROPY -->
  <section id="koruna-evropy" class="mountains-section" aria-labelledby="koruna-title">
    <h2 id="koruna-title" class="section-title">Koruna Evropy</h2>
    <div id="korunaGrid" class="mountains-grid grid-3" aria-live="polite"></div>
  </section>

  <!-- ALPY -->
  <section id="alpske-ctyrtisicovky" class="mountains-section" aria-labelledby="alps-title">
    <h2 id="alps-title" class="section-title">Alpské čtyřtisícovky</h2>
    <div id="alpsGrid" class="mountains-grid grid-3"></div>
  </section>

  <!-- NEPAL -->
  <section id="Nepal" class="mountains-section" aria-labelledby="nepal-title">
    <h2 id="nepal-title" class="section-title">Nepál</h2>

    <!-- TEXTOVÝ PROSTOR mezi buttony a fotkami -->
    <div id="nepalText">Zde napiš krátký popis výletu do Nepálu — trasy, datum, poznámky.</div>

    <!-- GRID s 4 sloupci (desktop) -->
    <div id="nepalGrid" class="mountains-grid grid-nepal" aria-live="polite"></div>
  </section>

  <!-- MODAL pro Nepál (sdílený modal) -->
  <div id="imageModal" class="modal" role="dialog" aria-hidden="true">
    <div class="modal-inner" role="document">
      <button class="modal-close" aria-label="Zavřít" onclick="closeModal()">✕</button>
      <img id="modalImage" class="modal-img" src="" alt="Fotografie z Nepálu">
      <div id="modalCaption" class="modal-caption"></div>
    </div>

    <div class="modal-arrow left" role="button" aria-label="Předchozí" onclick="prevImage()">❮</div>
    <div class="modal-arrow right" role="button" aria-label="Další" onclick="nextImage()">❯</div>
  </div>

<script>
/* ===== DATA (přímé cesty na raw GitHub) ===== */
const koruna = [
  { id: 'mont-blanc', name: 'Mont Blanc 4 810 m', image: 'https://raw.githubusercontent.com/suchanek76/website/main/images/Koruna/MontBlanc2x3.jpg' },
  { id: 'grossglockner', name: 'Grossglockner 3 798 m', image: 'https://raw.githubusercontent.com/suchanek76/website/main/images/Koruna/Grossglockner2x3.jpg' },
  { id: 'vatikan', name: 'Vatikánské zahrady 75 m', image: 'https://raw.githubusercontent.com/suchanek76/website/main/images/Koruna/Vatikan2x3.jpg' }
];

const alps = [
  { id: 'dufourspitze', name: 'Dufourspitze 4 634 m', image: 'https://raw.githubusercontent.com/suchanek76/website/main/images/4000/Dufourspitze2x3.jpg' },
  { id: 'weisshorn', name: 'Weisshorn 4 506 m', image: 'https://raw.githubusercontent.com/suchanek76/website/main/images/4000/Weisshorn2x3.jpg' },
  { id: 'matterhorn', name: 'Matterhorn 4 478 m', image: 'https://raw.githubusercontent.com/suchanek76/website/main/images/4000/Matterhorn2x3.jpg' }
];

/* Nepál: 40 fotek z GitHubu (Nepal01..Nepal40) */
const nepalPhotos = Array.from({length:40}, (_, i) =>
  `https://raw.githubusercontent.com/suchanek76/website/main/images/Nepal/Nepal${String(i+1).padStart(2,'0')}.jpg`
);

/* ===== RENDER GRIDY ===== */
function createCard(imgUrl, altText) {
  const d = document.createElement('div');
  d.className = 'mountain-card';
  d.style.backgroundImage = `url(${imgUrl})`;
  d.setAttribute('role','button');
  d.setAttribute('aria-label', altText || 'Fotografie');
  return d;
}

function populateKoruna() {
  const g = document.getElementById('korunaGrid');
  g.innerHTML = '';
  koruna.forEach(item => {
    const card = createCard(item.image, item.name);
    // po kliknutí otevře malý modal s 4 fotkami (pokud existují)
    card.onclick = () => openKorunaModal(item);
    g.appendChild(card);
  });
}

function populateAlps() {
  const g = document.getElementById('alpsGrid');
  g.innerHTML = '';
  alps.forEach(item => {
    const card = createCard(item.image, item.name);
    card.onclick = () => openKorunaModal(item);
    g.appendChild(card);
  });
}

function populateNepal() {
  const g = document.getElementById('nepalGrid');
  g.innerHTML = '';
  nepalPhotos.forEach((url, idx) => {
    const card = createCard(url, `Nepál ${idx+1}`);
    // klik otevírá modal galerie s navigací
    card.onclick = () => openModalAt(idx);
    g.appendChild(card);
  });
}

/* ===== KONTROLA A NAVIGACE NA SEKCE ===== */
function goTo(id) {
  document.getElementById(id).scrollIntoView({behavior:'smooth'});
}

/* ===== MODAL (Nepál gallery) ===== */
let modal = document.getElementById('imageModal');
let modalImage = document.getElementById('modalImage');
let modalCaption = document.getElementById('modalCaption');
let current = 0;

function openModalAt(index){
  current = index;
  showModalImage();
  modal.classList.add('active');
  modal.setAttribute('aria-hidden','false');
  // zabraňit scroll pozadí
  document.body.style.overflow = 'hidden';
}

function showModalImage(){
  modalImage.src = nepalPhotos[current];
  modalCaption.textContent = `${current+1} / ${nepalPhotos.length}`;
  // alt text
  modalImage.alt = `Nepál ${current+1}`;
}

function closeModal(){
  modal.classList.remove('active');
  modal.setAttribute('aria-hidden','true');
  document.body.style.overflow = '';
  // small delay clear src to avoid background loading
  setTimeout(()=>{ modalImage.src=''; }, 200);
}

function prevImage(){
  current = (current - 1 + nepalPhotos.length) % nepalPhotos.length;
  showModalImage();
}
function nextImage(){
  current = (current + 1) % nepalPhotos.length;
  showModalImage();
}

/* Close when clicking outside image */
modal.addEventListener('click', (e)=>{
  if(e.target === modal) closeModal();
});

/* Keyboard support */
document.addEventListener('keydown', (e)=>{
  if(!modal.classList.contains('active')) return;
  if(e.key === 'Escape') closeModal();
  if(e.key === 'ArrowLeft') prevImage();
  if(e.key === 'ArrowRight') nextImage();
});

/* ===== Koruna modal (malá stránka s 4 fotkami + text) =====
   Po kliknutí na kartu v Koruna/Alpy otevře se modal s 4 fotkami
   Přidáme jednoduché řešení: pokud existují lokální obrázky v /images/{id}/{id}01..04.jpg, načtou se.
   Pokud ne, zobrazíme hlavní obrázek jako náhradu.
*/
function openKorunaModal(mountain){
  // připravíme obsah modalCaption a modalImage jako malou galerii (4 obrázky)
  // Znovu používáme stejný modal; při otevření ukážeme první z 4 (pokud neexistují, fallback)
  const basePath = `https://raw.githubusercontent.com/suchanek76/website/main/images/${mountain.id || mountain.name.replace(/\\s+/g,'-')}`;
  // vytvoříme pole 4 obrázků
  const imgs = [];
  for(let i=1;i<=4;i++){
    const num = String(i).padStart(2,'0');
    imgs.push( `${basePath}/${(mountain.id || mountain.name.replace(/\\s+/g,'-'))}${num}.jpg` );
  }
  // pokud mají existovat, jednoduše zobrazíme první; uživatele upozornit nelze bez fetch
  // Pro jednoduchost: otevřeme modal a umožníme šipky přechod mezi 4 položkami
  // uložíme je do temporárního pole
  window._tempGallery = imgs.slice();
  current = 0;
  modalImage.src = window._tempGallery[current] || mountain.image || '';
  modalCaption.textContent = mountain.name || '';
  modal.classList.add('active');
  modal.setAttribute('aria-hidden','false');
  document.body.style.overflow = 'hidden';

  // přesměruj funkce prev/next na pracování s tempGallery
  // (zapamätáme staré funkce)
  window._oldPrev = window._oldPrev || prevImage;
  window._oldNext = window._oldNext || nextImage;
  // nahrajeme do lokálních funkcí:
  window._isTempMode = true;
  window._showTemp = function(){
    modalImage.src = window._tempGallery[current];
    modalCaption.textContent = `${mountain.name} — ${current+1}/4`;
  };
  // přepíšeme prev/next do temp režimu
  window.prevImage = function(){
    current = (current - 1 + window._tempGallery.length) % window._tempGallery.length;
    window._showTemp();
  };
  window.nextImage = function(){
    current = (current + 1) % window._tempGallery.length;
    window._showTemp();
  };
}

function restoreNextPrev(){
  // pokud bylo přepsáno, obnovíme původní prev/next
  if(window._oldPrev){ window.prevImage = window._oldPrev; window.nextImage = window._oldNext; window._isTempMode = false; }
}

/* Když se modal zavře, obnovíme původní prev/next pokud byly změněny */
const originalClose = closeModal;
closeModal = function(){
  originalClose();
  if(window._isTempMode){ restoreNextPrev(); window._tempGallery = null; }
};

/* ===== INIT ===== */
window.addEventListener('DOMContentLoaded', ()=>{
  populateKoruna();
  populateAlps();
  populateNepal();
  // posunout výchozí na Korunu Evropy (nepřesunujeme stránku)
});
</script>
</body>
</html>
